<div class="flex min-h-screen bg-gray-100 justify-center">
  <div class="w-full lg:w-1/3 flex items-center justify-center p-6">
    <div class="w-full bg-white border border-gray-300 shadow-md rounded-lg p-6">
      <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">Crear cuenta</h2>
      <!-- Mensaje Exitoso -->
      <div *ngIf="successMessage"
        class="mt-4 p-4 border border-green-300 bg-green-100 text-green-800 rounded shadow-sm flex items-center">
        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
          <path
            d="M10 2a8 8 0 100 16 8 8 0 000-16zm3.707 7.293l-4 4a1 1 0 01-1.414-1.414l3.293-3.293-3.293-3.293A1 1 0 117.293 5.293l4 4a1 1 0 01.414.707c0 .265-.105.52-.293.707z" />
        </svg>
        {{ successMessage }}
      </div>

      <!-- Mensaje de Error General -->
      <div *ngIf="errorMessage"
        class="mt-4 p-4 border border-red-300 bg-red-100 text-red-800 rounded shadow-sm flex items-center">
        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
          <path d="M10 2a8 8 0 100 16 8 8 0 000-16zm0 10a1 1 0 110-2 1 1 0 010 2zm1-5a1 1 0 10-2 0v3a1 1 0 002 0V7z" />
        </svg>
        {{ errorMessage }}
      </div>

      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">

        <!-- Nombre -->
        <div class="mb-4">
          <label for="nombre" class="block text-sm font-medium text-gray-700">Nombre</label>
          <div class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500 mr-2" viewBox="0 0 20 20"
              fill="currentColor">
              <path fill-rule="evenodd" d="M10 4a4 4 0 100 8 4 4 0 000-8zm0 10a8 8 0 100 16 8 8 0 000-16z"
                clip-rule="evenodd" />
            </svg>
            <input id="nombre" formControlName="nombre" type="text" required placeholder="Ingresa tu nombre"
              class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-yellow-500 transition duration-200 ease-in-out" />
          </div>
          <div *ngIf="f['nombre'].invalid && (f['nombre'].dirty || f['nombre'].touched)">
            <small *ngIf="f['nombre'].errors?.['required']" class="text-red-500">El nombre es requerido.</small>
            <small *ngIf="f['nombre'].errors?.['minlength']" class="text-red-500">El nombre debe tener al menos 3
              caracteres.</small>
            <small *ngIf="f['nombre'].errors?.['maxlength']" class="text-red-500">El nombre no debe exceder 20
              caracteres.</small>
            <small *ngIf="f['nombre'].errors?.['pattern']" class="text-red-500">El nombre solo puede contener letras y
              espacios.</small>
          </div>
        </div>

        <!-- Email -->
        <div class="mb-4">
          <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
          <div class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500 mr-2" viewBox="0 0 20 20"
              fill="currentColor">
              <path
                d="M2.94 6.32a1 1 0 00-.44 1.31l6 10a1 1 0 001.75-.1l.8-1.4a1 1 0 00-.29-1.31L3.29 6.71a1 1 0 00-.35-.39zM10 9a1 1 0 01.57.17l6 4a1 1 0 01-.58 1.83H3.97a1 1 0 01-.58-1.83l6-4A1 1 0 0110 9z" />
            </svg>
            <input id="email" formControlName="email" type="email" required placeholder="Ingresa tu email"
              class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-yellow-500 transition duration-200 ease-in-out" />
          </div>
          <div *ngIf="f['email'].invalid && (f['email'].dirty || f['email'].touched)">
            <small *ngIf="f['email'].errors?.['required']" class="text-red-500">El email es requerido.</small>
            <small *ngIf="f['email'].errors?.['email']" class="text-red-500">Email no válido.</small>
          </div>
        </div>

        <!-- Teléfono -->
        <div class="mb-4">
          <label for="telefono" class="block text-sm font-medium text-gray-700">Teléfono</label>
          <div class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500 mr-2" viewBox="0 0 20 20"
              fill="currentColor">
              <path fill-rule="evenodd"
                d="M7.707 3.707a1 1 0 00-1.414-1.414L4.58 4.006A4.984 4.984 0 003 6.944c.025 2.72 1.4 5.422 3.667 7.69 2.267 2.268 4.97 3.642 7.691 3.667a4.984 4.984 0 002.938-1.578l1.713-1.712a1 1 0 00-1.414-1.414L15 15a1 1 0 01-1.13.243C11.492 13.927 9.387 11.822 8.13 9.97a1 1 0 01.243-1.129L7.707 3.707z"
                clip-rule="evenodd" />
            </svg>
            <input id="telefono" formControlName="telefono" type="tel" required placeholder="Ingresa tu teléfono"
              maxlength="10"
              class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-yellow-500 transition duration-200 ease-in-out" />
          </div>
          <div *ngIf="f['telefono'].invalid && (f['telefono'].dirty || f['telefono'].touched)">
            <small *ngIf="f['telefono'].errors?.['required']" class="text-red-500">El teléfono es requerido.</small>
            <small *ngIf="f['telefono'].errors?.['pattern']" class="text-red-500">El teléfono debe tener exactamente 10
              dígitos y no puede contener letras.</small>
          </div>
        </div>

        <!-- Contraseña -->
        <div class="mb-4">
          <label for="password" class="block text-sm font-medium text-gray-700">Contraseña</label>
          <div class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500 mr-2" viewBox="0 0 20 20"
              fill="currentColor">
              <path fill-rule="evenodd"
                d="M10 4a3 3 0 00-3 3v1H6a2 2 0 00-2 2v7a2 2 0 002 2h8a2 2 0 002-2v-7a2 2 0 00-2-2h-1V7a3 3 0 00-3-3zm-1 4V7a1 1 0 012 0v1h-2zm-3 5a1 1 0 011-1h6a1 1 0 011 1v2a1 1 0 01-1 1H7a1 1 0 01-1-1v-2z"
                clip-rule="evenodd" />
            </svg>

            <input id="password" formControlName="password" [type]="isPasswordVisible ? 'text' : 'password'" required
              placeholder="Ingresa tu contraseña"
              class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-yellow-500 transition duration-200 ease-in-out" />
            <button type="button" (click)="togglePasswordVisibility()" class="ml-2">
              <svg *ngIf="!isPasswordVisible" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500"
                fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M12 4.5C6.5 4.5 2 12 2 12s4.5 7.5 10 7.5 10-7.5 10-7.5-4.5-7.5-10-7.5zM12 18.5C8.5 18.5 5 12 5 12s3.5-6.5 7-6.5 7 6.5 7 6.5-3.5 6.5-7 6.5zM12 15.5c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3z" />
              </svg>
              <svg *ngIf="isPasswordVisible" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500"
                fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M12 4.5C6.5 4.5 2 12 2 12s4.5 7.5 10 7.5 10-7.5 10-7.5-4.5-7.5-10-7.5zM12 18.5C8.5 18.5 5 12 5 12s3.5-6.5 7-6.5 7 6.5 7 6.5-3.5 6.5-7 6.5zM12 10.5a1.5 1.5 0 10-.001 2.999A1.5 1.5 0 0012 10.5z" />
              </svg>
            </button>
          </div>
          <div *ngIf="f['password'].invalid && (f['password'].dirty || f['password'].touched)">
            <small *ngIf="f['password'].errors?.['required']" class="text-red-500">La contraseña es requerida.</small>
            <small *ngIf="f['password'].errors?.['minlength']" class="text-red-500">Debe tener al menos 8
              caracteres.</small>
          </div>

          <!-- Barra de fortaleza -->
          <div class="password-strength-container"> <small class="block text-sm font-medium text-gray-700">
              Fortaleza de la contraseña: {{ getPasswordStrengthClass(passwordStrength(f['password'].value)) }}
            </small>
            <div class="strength-bar-container">
              <div class="strength-bar" [ngClass]="getPasswordStrengthClass(passwordStrength(f['password'].value))"
                [style.width]="(passwordStrength(f['password'].value) * 25) + '%'"></div>
            </div>
          </div>

        </div>
        <!-- Botón de registro -->
        <div class="mt-6">
          <button type="submit"
            class="w-full bg-yellow-500 text-white font-bold py-3 rounded-md hover:bg-yellow-600 transition duration-200">Registrarse</button>
        </div>
        <div class="text-left mt-4">
          ¿Ya tienes cuenta? <a href="/login" class="text-blue-500 hover:underline">Accede aquí.</a>
        </div>
      </form>
    </div>
  </div>
</div>