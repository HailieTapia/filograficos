<form (ngSubmit)="onSubmit()" [formGroup]="loginForm" class="max-w-md mx-auto p-6 bg-white shadow-md rounded-lg">
  <h2 class="text-2xl font-bold mb-6 text-center">Iniciar Sesión</h2>

  <div class="mb-4">
    <label for="email" class="block text-sm font-medium text-gray-700">Email:</label>
    <input 
      type="email" 
      id="email" 
      formControlName="email" 
      required 
      class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-blue-300"
    />
    <div *ngIf="f['email'].invalid && (f['email'].dirty || f['email'].touched)" class="mt-1 text-red-600 text-sm">
      <small *ngIf="f['email'].errors?.['required']">El email es obligatorio.</small>
      <small *ngIf="f['email'].errors?.['email']">El email no es válido.</small>
    </div>
  </div>

  <div class="mb-4">
    <label for="password" class="block text-sm font-medium text-gray-700">Contraseña:</label>
    <input 
      type="password" 
      id="password" 
      formControlName="password" 
      required 
      class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-blue-300"
    />
    <div *ngIf="f['password'].invalid && (f['password'].dirty || f['password'].touched)" class="mt-1 text-red-600 text-sm">
      <small *ngIf="f['password'].errors?.['required']">La contraseña es obligatoria.</small>
    </div>
  </div>

  <div class="mb-4">
    <re-captcha [siteKey]="siteKey" (resolved)="onCaptchaSuccess()"></re-captcha>
    <div *ngIf="!captchaSuccess && (f['email'].dirty || f['password'].dirty)" class="mt-1 text-red-600 text-sm">
      <small>Por favor completa el reCAPTCHA.</small>
    </div>
  </div>

  <button 
    type="submit" 
    [disabled]="loading" 
    class="w-full bg-blue-600 text-white font-semibold py-2 rounded-md hover:bg-blue-700 disabled:opacity-50"
  >
    Iniciar Sesión
  </button>

  <div *ngIf="errorMessage" class="mt-4 text-red-600 text-sm">
    <small>{{ errorMessage }}</small>
  </div>
</form>
